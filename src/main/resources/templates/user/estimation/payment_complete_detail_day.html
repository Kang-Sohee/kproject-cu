<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: mainHead"></head>
<body>
	
	<div id="wrap">

		<!-- top menu -->
		<div th:replace="top_menu :: topMenu"></div>

		<div class="sub-container1060">
			<div class="rent-detail-wrap">
				<div class="head">
					<div class="loc">
						<span id="companyName"></span>
						<span id="branchName"></span>
					</div>
					<div class="label-txt type1">예약완료</div>
					<div class="slider-box">
						<div class="swiper-container">
							<div class="swiper-wrapper">
								<div class="swiper-slide"><img id="carImg"></div>
							</div>
							<!-- Add Pagination -->
							<div class="swiper-pagination"></div>
							<!-- Add Arrows -->
							<!--
							<div class="swiper-button-next"></div>
							<div class="swiper-button-prev"></div>
							-->
						</div>
					</div>
					
					<div class="info">
						<p class="name"
							 id="carModelInfo"></p>
						<p class="opt1"
							 id="carPropertyInfo"></p>
						<p class="opt2">
							<span class="red">배달가능</span>
							<span>블랙박스</span>
							<span>후방카메라</span>
							<span>통풍시트</span>
						</p>
					</div>
				</div>
				<hr class="hr1">
				
				<div class="detail-info-box">
					<div class="fl">
						<h3 class="h3"><span><em>상세정보</em></span></h3>
						<div class="rent-schedule-common" style="display: block;">
							<div class="req-tit">
								<p class="tit1">기간 및 위치</p>
							</div>
							<div class="schedule-time mb25">
								<dl class="first">
									<dt>대여</dt>
									<dd>
										<p class="date" id="qt_startDay">2020.02.11 화 05:50</p>
									</dd>
								</dl>
								<dl>
									<dt>반납</dt>
									<dd>
										<p class="date" id="qt_endDay">2020.02.11 화 05:50</p>
									</dd>
								</dl>
							</div>
							<div class="req-tit">
								<p class="tit1 mb5">방법</p>
								<div class="pull-right">
									<a href="#" class="btn-type3 btn-xs txt-blue"><i class="ico-map"></i>지도보기</a>
								</div>
							</div>
							<ul class="checkbox-list mb25">
								<li><label><input type="checkbox" class="text-radio" accept=""checked="" name="deliveryTypeCode" value="OF"><span>지점방문</span></label></li>
								<li><label><input type="checkbox" class="text-radio" disabled name="deliveryTypeCode" value="DL"><span>배달대여</span></label></li>
							</ul>

							<p class="tit1 mb5">위치</p>
							<p class="txt1 mb25" id="companyAddress"><br></p>
							
							<p class="tit1">종합보험<span class="red">(만 26세 이상 대여 가능)</span></p>
							<div class="table1">
								<table>
									<colgroup>
										<col style="width:33%">
										<col style="width:33%">
										<col style="width:33%">
									</colgroup>
									<thead>
										<tr>
											<th>대인</th>
											<th>대물</th>
											<th>자손</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td id="personalCover"></td>
											<td id="propertyDamageCover"></td>
											<td id="onselfDamageCover"></td>
										</tr>
									</tbody>
								</table>
							</div>
							
							<p class="tit1">주행거리제한</p>
							<div class="table1">
								<table>
									<colgroup>
										<col style="width:50%">
										<col style="width:50%">
									</colgroup>
									<thead>
										<tr>
											<th>1일</th>
											<th>1개월</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>300km</td>
											<td>3,000km</td>
										</tr>
									</tbody>
								</table>
							</div>
							
							<hr class="hr1">

							<h3 class="h3"><span><em>운전자정보</em></span></h3>
							<div class="tit1">제1운전자(예약자)</div>
							<div class="txt-box1">
								<dl>
									<dt>이름</dt>
									<dd id="userName"></dd>
								</dl>
								<dl>
									<dt>휴대폰번호</dt>
									<dd id="userPhone"></dd>
								</dl>
								<dl>
									<dt>생년월일</dt>
									<dd id="userBirth">1980-09-09</dd>
								</dl>
							</div>

							<div class="tit1">제2운전자</div>
							<div class="txt-box1">
								<dl>
									<dt>이름</dt>
									<dd>홍길동</dd>
								</dl>
								<dl>
									<dt>휴대폰번호</dt>
									<dd>010-1234-5678</dd>
								</dl>
								<dl>
									<dt>생년월일</dt>
									<dd>1980-09-09</dd>
								</dl>
							</div>
							<hr class="hr1">
						</div>
					</div>
					<!-- // fl -->

					<div class="fr">
						<h3 class="h3"><span><em>결제정보</em></span></h3>
						<div class="pay">
							<dl>
								<dt>차량대여료</dt>
								<dd id="rentFee"></dd>
							</dl>
							<hr class="hr2">
							<dl>
								<dt>왕복 배달료</dt>
								<dd id="deliveryPay">무료</dd>
							</dl>
							<hr class="hr2">
							<dl>
								<dt>자차보험료</dt>
								<dd id="insuranceFee">무료
									<p class="desc gray">(고객 면책금 1,000,000원)</p>
								</dd>
							</dl>
							<hr class="hr2">

							<dl class="total mb10">
								<dt>총 금액</dt>
								<dd>10,000원</dd>
							</dl>
							<dl class="total mb10">
								<dt>할인 금액</dt>
								<dd>10,000원</dd>
							</dl>
							<dl class="payment-price mb10">
								<dt><b>결제 금액</b></dt>
								<dd><b>150,000원</b></dd>
							</dl>
							
							<div class="text-right mb15">
								<button class="btn-type3 btn-xs txt-blue">카드전표</button>
								
							</div>
							
							
							<div class="mb20">
								<button class="btn-type3 btn-m red block">취소요청</button>
							</div>
							<div class="bottom-area btn-box">
								<button id="btnExtensionPayment" class="btn-type1 bg-blue2">연장신청</button>
<!--								<button id="btnReview" class="btn-type1 bg-blue">후기작성</button>-->
							</div>
							<script>
								$('#btnExtensionPayment').click(function () {
									location.href="/user/payment/extensionDay.do"
								});

								$('#btnReview').click(function () {
									location.href="/user/payment/review.do"
								})
							</script>
						</div>
					</div>
					<!-- // fr -->
				</div>
				<!-- // detail-info-box -->
			</div>
			<!-- // 차량상세 -->
			
		</div>


		<div th:replace="footer :: footer"></div>
	</div>
	
	
<script th:inline="javascript">
	let reqParam = {
		// 'crIdx': crIdx
		// ,'rentStartDt': GLOBAL_ST_DT
		// , 'rentEndDt': GLOBAL_END_DT
	};

	$.ajax({
		type: "POST",
		url: "/user/carSearch/carDetail.json",
		dataType: 'json',
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		data : reqParam,
		async: false,
		success: function (res) {
		}
	}). done(function (res) {
		var userInfo = res.userInfo;
		var licenseInfo = res.licenseInfo;
		// var carDetail = res.resCarDto[0];

		// 유저 정보
		$('#userName').text(userInfo.userName);
		$('#userPhone').text(userInfo.userContact1);
		$('#userBirth').text(userInfo.userBirthday);


		// 면허 정보
		$('#licenseCode').text(licenseInfo.licenseCode);
		$('#licenseNumber').text(licenseInfo.licenseNumber);
		$('#licenseExpiration').text(licenseInfo.licenseExpiration);
		$('#licenseIssueDT').text(licenseInfo.licenseLocation + ' ' + licenseInfo.licenseIssueDt);

		// 차량 정보
		// var mileage = numberFormat(carDetail.mileage);
		// companyAddress = carDetail.companyAddress;
		//
		// dailyStandardPay = carDetail.dailyStandardPay;
		//
		// month3Deposit  = carDetail.month3Deposit;
		// month6Deposit  = carDetail.month6Deposit;
		// month9Deposit  = carDetail.month9Deposit;
		// month12Deposit = carDetail.month12Deposit;
		//
		// carDamageCover = carDetail.carDamageCover;
		// carDamageCover2 = carDetail.carDamageCover2;
		// carDamageCover3 = carDetail.carDamageCover3;
		// carDamageCover4 = carDetail.carDamageCover4;
		//
		// deliveryStandardPay = carDetail.deliveryStandardPay;
		// deliveryAddPay = carDetail.deliveryAddPay;



		// document.getElementById("carImg").src="https://admin-ohdocha.sharenshare.kr/img/car/" + carDetail.imgIdx;
		//
		// $('#companyName').text(carDetail.companyName);
		// $('#branchName').text(carDetail.branchName);
		// $('#carModelInfo').text(carDetail.year + ' ' + carDetail.modelName + ' ' + carDetail.modelDetailName);
		// $('#carPropertyInfo').text(carDetail.fuelCode + ' / ' + carDetail.colorName + ' / ' + mileage + 'km');

		$('#qt_startDay').text(preParam.detailStartTime);
		// $('#qt_endDay').text(preParam.detailEndTime);
		//
		// $('#companyAddress').text(companyAddress);
		//
		// $('#personalCover').text(numberFormat(carDetail.personalCover));
		// $('#propertyDamageCover').text(numberFormat(carDetail.propertyDamageCover));
		// $('#onselfDamageCover').text(numberFormat(carDetail.onselfDamageCover));

		// $('#dailyStandardPay').text(numberFormat(calcDisRentFee));
		// $('#rentFee').text(numberFormat(calcDisRentFee) + '원');
		// $('#insuranceFee').text('총 보험료 ' + numberFormat(insuranceFee) + '원');
		// $('#insuranceFee2').text('총 보험료 ' + numberFormat(insuranceFee2) + '원');
		// $('#insuranceFee3').text('총 보험료 ' + numberFormat(insuranceFee3) + '원');
		// $('#insuranceFee4').text('총 보험료 ' + numberFormat(insuranceFee4) + '원');
		//
		// $('#carDamageCover').text('(고객 면책금 ' + numberFormat(carDamageCover) + ')원');
		// $('#carDamageCover2').text('(고객 면책금 ' + numberFormat(carDamageCover2) + ')원');
		// $('#carDamageCover3').text('(고객 면책금 ' + numberFormat(carDamageCover3) + ')원');
		// $('#carDamageCover4').text('(고객 면책금 ' + numberFormat(carDamageCover4) + ')원');
		//
		// var monthly = Math.floor(calcDisRentFee / mmRentFee);
		// var ceilMonthly = Math.ceil(calcDisRentFee / mmRentFee);
		//
		// if (monthly < 13) {
		// 	$("#monthDeliveryPay").text('무료');
		// 	deliveryStandardPay = 0;
		// 	deliveryAddPay = 0;
		// }
		//
		// if (ceilMonthly <= 3 ) {
		// 	$('#deposit').text(numberFormat(month3Deposit) + ' 원');
		// 	deposit = month3Deposit;
		// }
		// else if ( ceilMonthly <= 6 ) {
		// 	$('#deposit').text(numberFormat(month6Deposit) + ' 원');
		// 	deposit = month6Deposit;
		// }
		// else if ( ceilMonthly <= 9 ) {
		// 	$('#deposit').text(numberFormat(month9Deposit) + ' 원');
		// 	deposit = month9Deposit;
		// }
		// else {
		// 	$('#deposit').text(numberFormat(month12Deposit) + ' 원');
		// 	deposit = month12Deposit;
		// }
		//
		// $('#monthTotalFee').text(numberFormat(calcDisRentFee) + ' 원');
		// $('#monthFinalPayment').text(numberFormat(calcDisRentFee) + ' 원');
		// if ( monthly == ceilMonthly) {
		// 	$('#monthTotalFeeExplan').text(numberFormat(mmRentFee) + '원 X ' + monthly + '개월');
		// 	$('#monthTotalFeeExplan2').text(' 총 ' + numberFormat(calcDisRentFee) + ' 원');
		// 	$('#monthFinalPaymentExplan').text(numberFormat(mmRentFee) + '원 X ' + monthly + '개월');
		// 	$('#monthFinalPaymentExplan2').text(' 총 ' + numberFormat(calcDisRentFee) + ' 원');
		// } else {
		// 	$('#monthTotalFeeExplan').text(numberFormat(mmRentFee) + '원 X ' + monthly + '개월 + 마지막 월 ' + numberFormat(mmLastRentFee) + '원');
		// 	$('#monthTotalFeeExplan2').text(' 총 ' + numberFormat(calcDisRentFee) + ' 원');
		// 	$('#monthFinalPaymentExplan').text(numberFormat(mmRentFee) + '원 X ' + monthly + '개월 + 마지막 월 ' + numberFormat(mmLastRentFee) + '원');
		// 	$('#monthFinalPaymentExplan2').text(' 총 ' + numberFormat(calcDisRentFee) + ' 원');
		// }


	});




</script>
</body>
</html>

