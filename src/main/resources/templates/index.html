<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: mainHead"></head>
<head xmlns="http://www.w3.org/1999/xhtml">

  <!-- 달력 -->
  <script src="../../static/js/bootstrap.js"></script>
  <script src="../../static/js/bootstrap-datetimepicker.js"></script>
  <link rel="stylesheet" href="../../static/css/bootstrap.css"/>
  <link rel="stylesheet" href="../static/css/datetimepickerstyle.css"/>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.1.4/css/bootstrap-datetimepicker.min.css">

</head>
<body class="bg-main">
<div id="wrap">

  <!-- top menu -->
  <div th:replace="main_top_menu :: mainTopMenu"></div>

  <div class="main">
    <div class="head">
      <div class="tit"><strong>두차</strong>에서<br><b>딱 맞는 렌터카를</b> 추천해드려요!</div>
    </div>
    <div class="body">
      <div class="rent1">
        <button id="btnStart" name="btnStart" class="btn-rent">
          <p class="tit">대여</p>
        </button>

        <div class="container">
          <div class="row">
            <div class='col-sm-6'>
              <div class="form-group">
                <div class='input-group date' id='datetimepicker'>
                  <input type='text' class="form-control"/>
                  <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                  <dd>
                    <label id="txtRentStartDay"></label>
                    <label id="txtRentStartWeekDay"></label>
                    <label id="txtRentStartAmPm"></label>
                    <label id="txtRentStartTime"></label>
                    <!-- <b>2019.11.11</b> (월)<br/> AM 09:00 -->
                  </dd>
                </div>
              </div>
            </div>
            <script type="text/javascript">
                $(function () {
                    $('#datetimepicker').datetimepicker({
                        locale: 'ru'
                    });
                });
            </script>
          </div>
        </div>


        <button id="btnEnd" name="btnEnd" class="btn-rent">
          <p class="tit">반납</p>
        </button>

        <div class="container">
          <div class="row">
            <div class='col-sm-6'>
              <div class="form-group">
                <div class='input-group date' id='datetimepicker2'>
                  <input type='text' class="form-control"/>
                  <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                  <dd>
                    <label id="txtRentEndDay"></label>
                    <label id="txtRentEndWeekDay"></label>
                    <label id="txtRentEndAmPm"></label>
                    <label id="txtRentEndTime"></label>
                    <!-- <b>2019.11.12</b> (월)<br/> AM 10:00 -->
                  </dd>
                </div>
              </div>
            </div>
            <script type="text/javascript">
                $(function () {
                    $('#datetimepicker2').datetimepicker({
                        locale: 'ru'
                    });
                });
            </script>
          </div>
        </div>
      </div>


      <div class="time">
        <span id="calDate">00개월 00일 00시간</span>
        <button class="btn-r" name="btnSelfEstimate" id="btnSelfEstimate">예약하기</button>
      </div>
    </div>
    <div class="slider-box">
      <div class="swiper-container">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <div class="tit">두차가 새롭게<br>오픈했습니다!</div>
            <img src="../static/img/common/tmp1.jpg">
          </div>
          <div class="swiper-slide">
            <div class="tit">두차가 새롭게<br>오픈했습니다!</div>
            <img src="../static/img/common/tmp1.jpg">
          </div>
          <div class="swiper-slide">
            <div class="tit">두차가 새롭게<br>오픈했습니다!</div>
            <img src="../static/img/common/tmp1.jpg">
          </div>
        </div>
        <div class="swiper-pagination"></div>
      </div>
    </div>

    <div class="btn-m"><a href="">
      <button class="btn-res">바로예약</button>
    </a></div>

  </div>

  <!-- footer -->
  <div th:replace="main_footer :: mainFooter"></div>

</div>

<script th:inline="javascript">
  var urIdx = '0vhO6BFG';

    //var activeDeliveryTab = Number("${preParam.tabIdx}");
    var activeDeliveryTab = 0;
    // 주소 팝업
    //var element_layer = document.getElementById('place_iframe');
    var element_layer = document.getElementById('place_iframe');
    var GLOBAL_SERVER_TIME = "";
    var GLOBAL_SERVER_TIME_YMD = "";
    var GLOBAL_SERVER_TIME_HM = "";

    var endDateSetMin;
    var endDateSetMax;

    // app cache
    var appCache = window.applicationCache;
    // window.addEventListener('load', function (e) {
    //     appCache.addEventListener('cached', handleCacheEvent, false);
    //     appCache.addEventListener('checking', handleCacheEvent, false);
    //     appCache.addEventListener('downloading', handleCacheEvent, false);
    //     appCache.addEventListener('progress', handleCacheEvent, false);
    //     appCache.addEventListener('noupdate', handleCacheEvent, false);
    //     appCache.addEventListener('obsolete', handleCacheEvent, false);
    //     appCache.addEventListener('updateready', handleCacheEvent, false);
    //
    //     appCache.addEventListener('error', handleCacheError, false);
    // }, false);


    function handleCacheEvent(e) {
        switch (e.type) {
            case "cached":
                console.log("cache status : cached");
                break;

            case "checking":
                console.log("cache status : checking");
                break;

            case "downloading":
                console.log("cache status : downloading");
                break;

            case "progress":
                console.log("cache status : progress");
                break;

            case "noupdate":
                console.log("cache status : noupdate");
                break;

            case "obsolete":
                console.log("cache status : manifest delete");
                break;

            case "updateready":
                console.log("updateready success cached");
                if (appCache.status == appCache.UPDATEREADY) {
                    appCache.swapCache();
                    //alert("업데이트가 완료되었습니다. 새로고침하세요.")
                    /*if (confirm('업데이트 완료되었습니다. 재시작 합니다.')) {
                      window.location.reload();
                    }*/
                }
                break;
        }
    }

    function handleCacheError(e) {
        console.log("cache status : cached fail");
    }


    window.onload = function () {

    }


    /*
       *  hd : 415 이상 for Desktop
       *  md : 415 이하 for mobile
       */
    var GLOBAL_VIEW_LIST = ['hd', 'mb'];
    var GLOBAL_VIEW_TYPE = 0;
    var selectItemLongti;
    var selectItemLati;
    var mbDisplaySetting = '';
    var geocoder;

    $(window).resize(function () {

        if ($(window).width() < 415) {
            GLOBAL_VIEW_TYPE = 1;
        } else {
            GLOBAL_VIEW_TYPE = 0;
        }

    });


    // geocoder = new kakao.maps.services.Geocoder();

    var callback = function (result, status) {
        selectItemLongti = '';
        selectItemLati = '';
        if (status === kakao.maps.services.Status.OK) {

            //위경도 세팅
            selectItemLongti = result.x;  // 경도
            selectItemLati = result.y;  // 위도

        }
    };


    $(document).ready(function () {


        $('#cari06').on('click', function () {
            alert("수입차는 준비중입니다.");
            $(this).prop('checked', false);
            return;
        });

        $('.btn_historyback').remove();
        // 해상도 listener
        if ($(window).width() < 415) {
            GLOBAL_VIEW_TYPE = 1;
        }

        $("#tcon_wr div.tconbx").hide();
        $("#tabs li:eq(" + activeDeliveryTab + ")").attr("class", "current");
        $("#tcon_wr div.tconbx:eq(" + activeDeliveryTab + ")").fadeIn(0);

        var setTitle = '조회위치';
        $('#startArrrTitle').text(setTitle);

        $('#tabs span').click(function (e) {

            // checkLogin();

            var itemIdx = Number($("#tabs span").index(this));

            var setTitle = '조회위치';
            if (itemIdx == 0) {

            } else {
                setTitle = '대여위치';
            }

            $('#startArrrTitle').text(setTitle);

            //clear
            if (activeDeliveryTab === Number(itemIdx)) {

            } else {
                $('.delivary_addr_text').text('');
                $('.return_addr_text').text('');
            }

            activeDeliveryTab = Number(itemIdx);
            e.preventDefault();
            $("#tcon_wr div.tconbx").hide();
            $("#tabs li").attr("class", "");
            $(this).parent().attr("class", "current");
            $('#' + $(this).attr('title')).fadeIn(0);

        });

        initStartTImeDefault();


        window.prettyPrint && prettyPrint();
        $('.sc_wrap').scrollbar();

        $.fn.scrollEnd = function (callback, timeout) {
            $(this).scroll(function () {
                var $this = $(this);
                if ($this.data('scrollTimeout')) {
                    clearTimeout($this.data('scrollTimeout'));
                }
                $this.data('scrollTimeout', setTimeout(callback, timeout));
            });
        };

        $(".scrollbox1").on('scroll mousewheel DOMMouseScroll', function (e) {
            $('body').css('overflow', 'hidden');
            var stepHeight = $(this).find('li:first-child').height();
            var scrollTop = $(this).scrollTop();

            if (scrollTop % stepHeight > stepHeight / 2) {
                newScrollTop1 = scrollTop + (stepHeight - scrollTop % stepHeight);
            } else {
                newScrollTop1 = scrollTop - (scrollTop % stepHeight);
            }
            newSelect1 = newScrollTop1 / stepHeight;

        });

        $(".scrollbox2").on('scroll mousewheel DOMMouseScroll', function (e) {

            $('body').css('overflow', 'hidden');
            var stepHeight = $(this).find('li:first-child').height();
            var scrollTop = $(this).scrollTop();

            if (scrollTop % stepHeight > stepHeight / 2) {
                newScrollTop2 = scrollTop + (stepHeight - scrollTop % stepHeight);
            } else {
                newScrollTop2 = scrollTop - (scrollTop % stepHeight);
            }
            newSelect2 = newScrollTop2 / stepHeight;

        });

        $(".scrollbox3").on('scroll mousewheel DOMMouseScroll', function (e) {

            $('body').css('overflow', 'hidden');
            var stepHeight = $(this).find('li:first-child').height();
            var scrollTop = $(this).scrollTop();

            if (scrollTop % stepHeight > stepHeight / 2) {
                newScrollTop3 = scrollTop + (stepHeight - scrollTop % stepHeight);
            } else {
                newScrollTop3 = scrollTop - (scrollTop % stepHeight);
            }
            newSelect3 = newScrollTop3 / stepHeight;

        });

        $(".scrollbox1").scrollEnd(function () {
            $(".scrollbox1").stop().animate({scrollTop: newScrollTop1}, 300);
            $(".scrollbox1 li").removeClass('select');
            $(".scrollbox1 li").eq(newSelect1 + 2).addClass('select');
        }, 100);

        $(".scrollbox2").scrollEnd(function () {
            $('body').css('overflow', 'auto');
            $(".scrollbox2").stop().animate({scrollTop: newScrollTop2}, 300);
            $(".scrollbox2 li").removeClass('select');
            $(".scrollbox2 li").eq(newSelect2 + 2).addClass('select');
        }, 100);

        $(".scrollbox3").scrollEnd(function () {
            $('body').css('overflow', 'auto');
            $(".scrollbox3").stop().animate({scrollTop: newScrollTop3}, 300);
            $(".scrollbox3 li").removeClass('select');
            $(".scrollbox3 li").eq(newSelect3 + 2).addClass('select');
        }, 100);


        if ($('#headerslick li').length > 1) {
            $('#headerslick').bxSlider({
                mode: 'horizontal',
                speed: 2000,
                auto: true,
                pause: 5000
            });
        }


        //대여일시 수정
        //pc
        $('#btnRentDateOk_PC').click(function (e) {
            closeLayer('popDate1');
            setTimeDiff();
        });

        $('#btnReturnDateOk_PC').click(function (e) {
            closeLayer('popDate2');
            setTimeDiff();
        });


        var click_flag = true;
        //견적요청 버튼 클릭
        $('#btnEstimate').click(function (e) {

            if (!checkLogin()) {
                alertify.confirm("서비스를 이용하시려면 로그인을 해주세요.", function (e) {
                    if (e) {
                        reloadParam();
                    }
                });

                $(this).removeAttr('disabled');
                click_flag = true;
                return;
            }

            if (click_flag) {
                click_flag = false;
                $(this).attr('disabled', 'disabled');

                if (mainValidation()) {
                    alertify.confirm("선택하신 정보로 대여요청을 하시겠습니까?", function (e) {
                        if (e.button.text.toUpperCase() === 'OK') {
                            preSubmit();
                        }
                    });
                }

                $(this).removeAttr('disabled');
                click_flag = true;
            }


        }); //end btnEstimate

        // self 차량 선택 서비스로 이동
        $('#btnSelfEstimate').on('click', function () {

            if (!checkLogin()) {
                alertify.confirm("서비스를 이용하시려면 로그인을 해주세요.", function (e) {
                    if (e) {
                        reloadParam();
                    }
                });

                $(this).removeAttr('disabled');
                click_flag = true;
                return;
            }

            if (click_flag) {
                click_flag = false;
                $(this).attr('disabled', 'disabled');

                if (mainValidation()) {
                    alertify.confirm("선택하신 정보로 대여요청을 하시겠습니까?", function (e) {
                        if (e.button.text.toUpperCase() === 'OK') {
                            locationShowTargetCarList();
                        }
                    });
                }
                $(this).removeAttr('disabled');
                click_flag = true;
            }

        });


        // 반납일시 팝업창 개월추가 이벤트 2019-12-18 pws
        $("input:radio[name='month']").click(function () {
            var li_index = Number($("input:radio[name=month]").index(this));
            var setDateList = [30, 90, 180, 360];
            var dayCount = Number(setDateList[li_index]);
            var amPm = $('#txtRentStartAmPm').text();
            var stTm = amPm == 'PM' ? convertTimeFormat24MIS($('#txtRentStartTime').text()) : convertTimeFormat12MIS($('#txtRentStartTime').text());
            var setDate = new Date($('#txtRentStartDay').text().replace(/\./g, '\/') + ' ' + stTm + ':00');
            setDate.setDate(setDate.getDate() + dayCount);


            var setDateMask = moment(setDate).format('YYYY.MM.DD');

            //var setDate =  moment($('#txtRentStartDay').text().replace(/\./g, '\/')).add('days',Number(setDateList[li_index])*30).format('YYYY.MM.DD');

            $('#mb_txtRentEndWeekDay').text('(' + cf_DisplayDay(setDateMask) + ')');
            $("#mb_txtRentEndDay").text(setDateMask);

            $('#web_txtRentEndWeekDay').text('(' + cf_DisplayDay(setDateMask) + ')');
            $("#web_txtRentEndDay").text(setDateMask);
        });


        //배달대여 대여위치
        $(".btn_delivery_addr").click(function () {
            $('body').css('overflow', 'hidden');
            var target_dom = $(this).find('em');
            var close_target = document.getElementById('popPlace');
            showDaumLocationApiWithIframe(element_layer, target_dom, close_target);
            $('#popPlace').show();
        });

        //반납위치
        $(".btn_return_addr").click(function () {
            var target_dom = $(this).find('em');
            var close_target = document.getElementById('popPlace');
            showDaumLocationApiWithIframe(element_layer, target_dom, close_target);
            $('#popPlace').show();

        });


        $("select.custom").each(function () {
            var sb = new SelectBox({
                selectbox: $(this),
                height: 250,
                width: 200
            });
        });


        // 이전상태 파라미터가 있다면 init
        if ("${preParam.startDay}" != 'null' && "${preParam.startDay}".length > 1) {
            initReloadData();
        }

        initMobiscroll();
        setEndDateLimit();
        initEndDateMobiscroll();


    });//end ready


    // init startDate Mobiscroll
    function initMobiscroll() {

        if (GLOBAL_VIEW_TYPE == 1) {
            mbDisplaySetting = 'bottom';
        } else {
            mbDisplaySetting = 'bubble';
        }

        var stDate = $('#txtRentStartDay').text().replace(/\./g, '\/');
        var setMax = moment(stDate).add('days', 30).format('YYYY/MM/DD');
        //var setMin =  moment(stDate).format('YYYY/MM/DD');

        var current_time_am_pm = $('#txtRentStartAmPm').text();
        var current_Hour = current_time_am_pm == 'PM' ? convertTimeFormat24MIS($('#txtRentStartTime').text()) : convertTimeFormat12MIS($('#txtRentStartTime').text());

        var current_Minute = $('#txtRentStartTime').text().split(':')[1];
        var current_time = current_Hour.split(':')[0] + ":" + current_Minute;

        var dateTmp = $('#txtRentStartDay').text().replace(/\./g, '\/');
        var setMin = new Date(dateTmp + ' ' + current_time);

        mobiscroll.datetime('#btn_startDate', {
            display: mbDisplaySetting,
            animate: 'fade',
            dateFormat: 'yy.mm.dd',
            animate: 'pop',
            touchUi: true,
            showLabel: true,
            lang: 'ko',
            rows: 3,
            max: setMax,
            min: setMin,
            steps: {
                minute: 10
            },
            onBeforeShow: function (event, inst) {

                var setTime = $("#txtRentStartTime").text().split(':');
                var hh = Number(setTime[0]);
                var mm = setTime[1];
                if ($('#txtRentStartAmPm').text() == 'PM') {
                    if (hh == 12) {
                        hh = String(hh);
                    }
                    if (hh < 12) {
                        hh = String(hh + 12);
                    }
                }

                var setTimeText = hh + ':' + mm;
                //var setTimeText = '16:59'; // case 2

                inst.setVal(new Date($("#txtRentStartDay").text().replace(/\./g, '\/') + ' ' + setTimeText + ':' + '00'), true);

            },
            onBeforeClose: function (event, inst) {

                // 확인 버튼 눌렀을 경우
                if (event.button == 'set') {
                    var selectItem = event.valueText;
                    var mb_date = event.valueText.split(' ')[0];
                    var mb_time = event.valueText.split(' ')[1];

                    $('#txtRentStartWeekDay').text('(' + cf_DisplayDay(mb_date) + ')');
                    $("#txtRentStartDay").text(mb_date);
                    $('#txtRentStartAmPm').text(cf_Display_AmPm_By_Times(mb_time));
                    $('#txtRentStartTime').text(convertTimeFormat12MIS(mb_time));

                } else {
                    // 취소 버튼 눌렀을 경우

                }

            },
            onClose: function (event, inst) {

                var selectItem = event.valueText;
                var mb_date = event.valueText.split(' ')[0];
                var mb_time = event.valueText.split(' ')[1];

                // return [0] : 개월
                // return [1] : 일
                // return [2] : 시간
                // return [3] : 분
                var setDiff = setDateTimeDiff(new Date($("#txtRentStartDay").text().replace(/\./g, '/') + ' ' + $('#txtRentStartTime').text() + ':00'), new Date($("#txtRentEndDay").text().replace(/\./g, '/') + ' ' + $('#txtRentEndTime').text() + ':00'));

                if ((Number(setDiff[0]) + Number(setDiff[1])) <= 0 && Number(setDiff[2]) < 24) {
                    var setEndDate = String(moment(mb_date.replace(/\./g, '/')).add(1, "day").format('YYYY.MM.DD'));
                    $('#txtRentEndWeekDay').text('(' + cf_DisplayDay(setEndDate) + ')');
                    $("#txtRentEndDay").text(setEndDate);
                    $('#txtRentEndAmPm').text(cf_Display_AmPm_By_Times(mb_time));
                    $('#txtRentEndTime').text(convertTimeFormat12MIS(mb_time));
                }

                if (!dateTimeValidation()) {
                    return;
                } else {
                    setTimeDiff();
                }

                setEndDateLimit();
                initEndDateMobiscroll();
            }
        });
        //initEndDateMobiscroll();
    }


    // switch end Date min max
    function setEndDateLimit() {

        var stAmPm = $('#txtRentStartAmPm').text();
        var stTm = stAmPm == 'PM' ? convertTimeFormat24MIS($('#txtRentStartTime').text()) : convertTimeFormat12MIS($('#txtRentStartTime').text());
        var setMinDate = new Date($('#txtRentStartDay').text().replace(/\./g, '\/') + ' ' + stTm + ':00');
        setMinDate.setDate(setMinDate.getDate() + 1);
        endDateSetMin = setMinDate;

        var setMaxDate = new Date($('#txtRentStartDay').text().replace(/\./g, '\/') + ' ' + stTm + ':00');
        setMaxDate.setDate(setMaxDate.getDate() + 360);
        endDateSetMax = setMaxDate;

        //console.log(endDateSetMin);
        //console.log(endDateSetMax);
    }

    // init endDateMobiscroll
    function initEndDateMobiscroll() {

        var stAmPm = $('#txtRentStartAmPm').text();
        var stHours = stAmPm == 'PM' ? Number($('#txtRentStartTime').text().split(':')[0]) + 12 : Number($('#txtRentStartTime').text().split(':')[0]);
        var stMinutes = Number($('#txtRentStartTime').text().split(':')[1]);

        //var endDateSetMin =  moment($('#txtRentStartDay').text().replace(/\./g, '\/')).add(1,'days').add(stHours,'hours').add(stMinutes,'minutes').format('YYYY/MM/DD HH:mm:ss');
        //var endDateSetMax =  moment($('#txtRentStartDay').text().replace(/\./g, '\/')).add(12,'month').format('YYYY/MM/DD HH:mm:ss');

        mobiscroll.datetime('.endPop', {
            display: mbDisplaySetting,
            animate: 'fade',
            dateFormat: 'yy.mm.dd',
            animate: 'pop',
            touchUi: true,
            showLabel: true,
            lang: 'ko',
            rows: 3,
            min: endDateSetMin,
            max: endDateSetMax,
            steps: {
                minute: 10
            },
            onBeforeShow: function (event, inst) {

                var setTime = $("#web_txtRentEndTime").text().split(':');
                var hh = Number(setTime[0]);
                var mm = setTime[1];

                if ($('#txtRentEndAmPm').text() == 'PM') {
                    if (hh == 12) {
                        hh = String(hh);
                    }
                    if (hh < 12) {
                        hh = String(hh + 12);
                    }
                }

                var setTimeText = hh + ':' + mm;

                inst.setVal(new Date($("#web_txtRentEndDay").text().replace(/\./g, '\/') + ' ' + setTimeText + ':' + '00'), true);

            },
            onBeforeClose: function (event, inst) {

                if (event.button == 'set') {
                    var selectItem = event.valueText;
                    var mb_date = event.valueText.split(' ')[0];
                    var mb_time = event.valueText.split(' ')[1];

                    $('#mb_txtRentEndWeekDay').text('(' + cf_DisplayDay(mb_date) + ')');
                    $("#mb_txtRentEndDay").text(mb_date);
                    $('#mb_txtRentEndAmPm').text(cf_Display_AmPm_By_Times(mb_time));
                    $('#mb_txtRentEndTime').text(convertTimeFormat12MIS(mb_time));

                    $('#web_txtRentEndWeekDay').text('(' + cf_DisplayDay(mb_date) + ')');
                    $("#web_txtRentEndDay").text(mb_date);
                    $('#web_txtRentEndAmPm').text(cf_Display_AmPm_By_Times(mb_time));
                    $('#web_txtRentEndTime').text(convertTimeFormat12MIS(mb_time));
                    //$('#txtRentEndTime').text(mb_time);

                } else {

                }


            },
            onCancle: function (event, inst) {

            }
        });
    }


    /*
       * 팝업 오픈용 함수
       */
    function openLayer(IdName, tpos, lpos) {
        //checkLogin();

        if (IdName == "popPlace") {


            cf_setupAddress("rentAddr");

            var pop = document.getElementById(IdName);
            pop.style.display = "block";
        }

        if (IdName == "popDate1") {

            $("#rentStartDay").val($("#txtRentStartDay").text());
            $("#rentStartTime").val($("#txtRentStartTime").text());


            //현재 시간을 가져온다.
            mobiscroll.date('#rentStartDay', {
                display: 'bubble',
                dateFormat: 'yy.mm.dd',
                animate: 'pop',
                touchUi: false,
                showLabel: true,
                lang: 'ko',
                rows: 3,

                onBeforeClose: function (event, inst) {
                    var selectItem = event.valueText;
                    $('#txtRentStartWeekDay').text('(' + cf_DisplayDay(selectItem) + ')');
                    $("#txtRentStartDay").text(selectItem);
                    setTimeDiff();
                }
            });


            mobiscroll.time('#rentStartTime', {
                display: 'bubble',
                animate: 'pop',
                //headerText : 'Hour : MM',
                showLabel: true,
                touchUi: false,
                lang: 'ko',
                steps: {
                    minute: 10
                },
                rows: 3,
                onBeforeClose: function (event, inst) {
                    var selectItem = event.valueText;
                    $("#txtRentStartTime").text(selectItem);
                    setTimeDiff();
                }
            });


        }

        if (IdName == "popDate2") { //반납일시

            $('#mb_txtRentEndWeekDay').text($('#txtRentEndWeekDay').text());
            $("#mb_txtRentEndDay").text($('#txtRentEndDay').text());
            $('#mb_txtRentEndAmPm').text($('#txtRentEndAmPm').text());
            $('#mb_txtRentEndTime').text($('#txtRentEndTime').text());

            $('#web_txtRentEndWeekDay').text($('#txtRentEndWeekDay').text());
            $("#web_txtRentEndDay").text($('#txtRentEndDay').text());
            $('#web_txtRentEndAmPm').text($('#txtRentEndAmPm').text());
            $('#web_txtRentEndTime').text($('#txtRentEndTime').text());

            var pop = document.getElementById(IdName);
            pop.style.display = "block";


        } else {

            var pop = document.getElementById(IdName);
            pop.style.display = "block";
        }

    }

    function openAddressLayer(IdName, gubun) {
        if (gubun == 'delivery') {
            sample4_execDaumPostcode('deliveryAddr');
        }

    }//end openAddressLayer;


    function closeLayer(IdName) {
        var pop = document.getElementById(IdName);
        pop.style.display = "none";
        $('body').css('overflow', 'auto');

        // pop2 clear
        $('.rental_period input').prop('checked', false);
    }


    function setTimeDiff() {

        var stTm = $('#txtRentStartAmPm').text() == 'PM' ? convertTimeFormat24MIS($("#txtRentStartTime").text()) : $("#txtRentStartTime").text();
        var endTm = $('#txtRentEndAmPm').text() == 'PM' ? convertTimeFormat24MIS($("#txtRentEndTime").text()) : $("#txtRentEndTime").text();

        var startDay = $('#txtRentStartDay').text().replace(/\./g, '');
        var start_yyyy = startDay.substring(0, 4);
        var start_mm = startDay.substring(4, 6);
        var start_dd = startDay.substring(6, 8);
        var st_hh = stTm.split(':')[0];
        var st_mm = stTm.split(':')[1];

        var endDay = $('#txtRentEndDay').text().replace(/\./g, '');
        var end_yyyy = endDay.substring(0, 4);
        var end_mm = endDay.substring(4, 6);
        var end_dd = endDay.substring(6, 8);
        var ed_hh = endTm.split(':')[0];
        var ed_mm = endTm.split(':')[1];

        var startDate = start_yyyy + '/' + start_mm + '/' + start_dd;
        var endDate = end_yyyy + '/' + end_mm + '/' + end_dd;


        var diffDate = setDateTimeDiff(new Date(startDate + ' ' + stTm + ':' + '00'), new Date(endDate + ' ' + endTm + ':' + '00'));

        renderingSumTime(diffDate[0], diffDate[1], diffDate[2], diffDate[3]);

    }


    function showDaumLocationApiWithIframe(element_layer, target_dom, close_target) {

        var themeObj = {
            //bgColor: "#fec920", //바탕 배경색
            //searchBgColor: "#0B65C8", //검색창 배경색
            //contentBgColor: "", //본문 배경색(검색결과,결과없음,첫화면,검색서제스트)
            //pageBgColor: "", //페이지 배경색
            //textColor: "", //기본 글자색
            //queryTextColor: "#FFFFFF" //검색창 글자색
            //postcodeTextColor: "", //우편번호 글자색
            //emphTextColor: "", //강조 글자색
            //outlineColor: "", //테두리
        };

        var setAddr = '';
        new daum.Postcode({
            theme: themeObj,

            oncomplete: function (data) {
                // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var addr = ''; // 주소 변수
                var extraAddr = ''; // 참고항목 변수

                //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    addr = data.roadAddress;
                } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    addr = data.jibunAddress;
                }
                if (Number(activeDeliveryTab) == 1) {
                    $('#addr3').text(addr);
                }


                // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                if (data.userSelectedType === 'R') {
                    // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                    // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                    if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                        extraAddr += data.bname;
                    }
                    // 건물명이 있고, 공동주택일 경우 추가한다.
                    if (data.buildingName !== '' && data.apartment === 'Y') {
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                    if (extraAddr !== '') {
                        extraAddr = extraAddr + ' ';
                    }
                    // 조합된 참고항목을 해당 필드에 넣는다.
                    //setAddr += extraAddr;

                } else {
                    setAddr += '';
                }

                //setAddr += data.zonecode + ' ';
                setAddr += addr;
                $(target_dom).text(setAddr);

                //if( activeDeliveryTab == 1 ){ //DL	배달대여
                //	$('.return_addr_text').text(setAddr);
                //}

                // 지번주소가 정확임
                geocoder.addressSearch(data.roadAddress, callback, 1);

                element_layer.style.display = 'none';
                close_target.style.display = 'none';
                $('body').css('overflow', 'auto');
                //close_target.body.scrollTop = currentScroll;
            },

            width: '100%',
            height: '100%',
            maxSuggestItems: 5
        }).embed(element_layer); //show

        // close
        element_layer.style.display = 'block';


    }


    function foldDaumPostcode() {
        $('#popPlace').hide();
    }

    function closeRentDateTimePop() {

        $('#txtRentEndWeekDay').text($('#mb_txtRentEndWeekDay').text());
        $("#txtRentEndDay").text($('#mb_txtRentEndDay').text());
        $('#txtRentEndAmPm').text($('#mb_txtRentEndAmPm').text());
        $('#txtRentEndTime').text($('#mb_txtRentEndTime').text());

        if (!dateTimeValidation()) {
            //initStartTImeDefault();
        } else {
            setTimeDiff();
        }
        closeLayer('popDate2');


    }


    function checkLogin() {

        var loginFlag = false;

        if (urIdx == "" || urIdx == null) {

        } else {
            loginFlag = true;
        }
        return loginFlag;
    }

    function dateTimeValidation() {

        var validFlag = true;
        var startDate = $('#txtRentStartDay').text().replace(/\./g, '/');
        var endDate = $('#txtRentEndDay').text().replace(/\./g, '/');

        var startAmPm = $('#txtRentStartAmPm').text();
        var endAmPm = $('#txtRentEndAmPm').text();


        var start_time = startAmPm == 'AM' ? convertTimeFormat12MIS($('#txtRentStartTime').text()) : convertTimeFormat24MIS($('#txtRentStartTime').text());
        var end_time = endAmPm == 'AM' ? convertTimeFormat12MIS($('#txtRentEndTime').text()) : convertTimeFormat24MIS($('#txtRentEndTime').text());

        // return [0] : 개월
        // return [1] : 일
        // return [2] : 시간
        // return [3] : 분
        var setDiff = setDateTimeDiff(new Date(startDate + ' ' + start_time + ':00'), new Date(endDate + ' ' + end_time + ':00'));

        if ((Number(setDiff[0]) + Number(setDiff[1])) <= 0 && Number(setDiff[2]) < 3 && Number(setDiff[3]) < 30) {
            //console.log("24시간 미만");
            //alert("최소 대여기간은 하루입니다.");
            alert("최소 대여기간은 3시간 입니다.");
            resetEndDate();
            validFlag = false;
        }

        setServerTime();

        //var nowDateTimeDiff = setDateTimeDiff( new Date(startDate+' '+start_time+':00') , new Date(moment(GLOBAL_SERVER_TIME).add(24,'hours')));
        var nowDateTimeDiff = setDateTimeDiff(new Date(startDate + ' ' + start_time + ':00'), new Date(moment(GLOBAL_SERVER_TIME).add(2, 'hours').add(30, 'minutes')));
        var serverTimeDiff = Number(nowDateTimeDiff[0]) + Number(nowDateTimeDiff[1] + nowDateTimeDiff[2] + nowDateTimeDiff[3]);


        if (serverTimeDiff > 0) {
            //console.log("현재시간이 서버시간보다 작을 경우");
            //alert("대여일시 시간은 현재시간으로부터 하루 뒤부터 가능합니다.");
            alert("대여일시 시간은 현재시간으로부터 2시간 30분 뒤부터 가능합니다.");
            initStartTImeDefault();
            validFlag = false;
            return validFlag;
        }

        /*
            if( Number(nowDateTimeDiff[3]) > 30 ){
                alert("대여일시 시간은 현재시간으로부터 하루 뒤부터 가능합니다.");
                initStartTImeDefault();
                validFlag = false;
                return validFlag;
            }
            */

        return validFlag;
    }

    function resetEndDate() {

        var stTm = $('#txtRentStartAmPm').text() == 'PM' ? convertTimeFormat24MIS($("#txtRentStartTime").text()) : convertTimeFormat12MIS($("#txtRentStartTime").text());
        var amPm = $('#txtRentStartAmPm').text();

        var startDay = $('#txtRentStartDay').text().replace(/\./g, '/');
        var setEndDate = moment(startDay).add(2, 'day').format('YYYY.MM.DD');
        var setDay = cf_DisplayDay(setEndDate);
        var startDate = String($('#txtRentStartDay').text());


        $("#txtRentEndDay").text(setEndDate);
        $("#txtRentEndWeekDay").text("(" + setDay + ")");
        $("#txtRentEndAmPm").text(amPm);
        $("#txtRentEndTime").text(stTm);

        setTimeDiff();

    }


    function initStartTImeDefault() {

        setServerTime();

        // case1 : init 시간이 오전일 경우 AM 으로 설정되어야 한다.
        //GLOBAL_SERVER_TIME = '2020/01/08 17:16'

        var serverTime = new Date(GLOBAL_SERVER_TIME);
        //var StartDay = moment(GLOBAL_SERVER_TIME).add(1,'day').toDate();
        var StartDay = moment(GLOBAL_SERVER_TIME).add(3, 'hours').toDate();

        var stYyyy = StartDay.getFullYear();
        var stMm = (StartDay.getMonth() + 1) < 10 ? '0' + (StartDay.getMonth() + 1) : (StartDay.getMonth() + 1);
        var stDd = StartDay.getDate() < 10 ? '0' + StartDay.getDate() : StartDay.getDate();

        var stHh = StartDay.getHours() < 10 ? '0' + StartDay.getHours() : StartDay.getHours();
        var stMi = StartDay.getMinutes() < 10 ? '10' : String(StartDay.getMinutes()).substring(0, 1) + '0';

        var StartAmPm = cf_Display_AmPm_By_Times(stHh + ':' + stMi);
        var StartWeekDay = cf_DisplayDay(stYyyy + '/' + stMm + '/' + stDd);


        //stHh = stHh < 10 ? String(stHh) + '0' : String(stHh);
        //stMi = stMi < 10 ? String(stMi) + '0' : String(stMi);

        var StartTime = convertTimeFormat12MIS(stHh + stMi);

        //MMMM Do YYYY, h:mm:ss a
        $("#txtRentStartDay").text(moment(stYyyy + '/' + stMm + '/' + stDd).format('YYYY.MM.DD'));
        $("#txtRentStartWeekDay").text("(" + StartWeekDay + ")");
        $("#txtRentStartAmPm").text(StartAmPm);
        $("#txtRentStartTime").text(StartTime);


        $("#txtRentEndAmPm").text(StartAmPm);
        $("#txtRentEndTime").text(StartTime);

        var EndDay = moment().add('days', 2).format('YYYY.MM.DD');
        var EndAmPm = cf_Display_AmPm_By_Times(moment().format("h:mm:ss"));
        var EndWeekDay = cf_DisplayDay(EndDay);

        $("#txtRentEndDay").text(EndDay);
        $("#txtRentEndWeekDay").text(" (" + EndWeekDay + ") ");

        setTimeDiff();

    }

    function renderingSumTime(strMm, strDd, strHh, strMin) {

        var setMm = strMm == 0 ? '&nbsp;</b>' : strMm + '</b>개월';
        var setDd = strDd == 0 ? '&nbsp;</b>' : strDd + '</b>일';
        var setHh = strHh == 0 ? '&nbsp;</b>' : strHh + '</b>시간';
        var setMin = strMin == 0 ? '&nbsp;</b>' : strMin + '</b>분';

        var html = '';
        html += '<span>총';
        html += '	<b>' + setMm;
        html += '	<b>' + setDd;
        html += '	<b>' + setHh;
        html += '	<b>' + setMin;
        html += '</span>';

        $('.total_time').empty();
        $('.total_time').append(html);
    }


    // 로그인하고 왔을때 데이터셋팅값이 있을 경우 init (onReady);
    function initReloadData() {

        var startDay =      /*[[${preParam.startDay}]]*/'0';
        var startAmPm =     /*[[${preParam.startAmPm}]]*/'0';
        var startTime =     /*[[${preParam.startTime}]]*/'0';
        var endDay =        /*[[${preParam.endDay}]]*/'0';
        var endAmPm =       /*[[${preParam.endAmPm}]]*/'0';
        var endTime =       /*[[${preParam.endTime}]]*/'0';
        var addr1 =         /*[[${preParam.addr1}]]*/'0';
        var addr2 =         /*[[${preParam.addr2}]]*/'0';
        var addr3 =         /*[[${preParam.addr3}]]*/'0';
        var tabIdx =        /*[[${preParam.tabIdx}]]*/'0';

        $("#tabs li").each(function () {
            if ($(this).index() == tabIdx) {
                $(this).attr("class", "current");
                $("#tcon_wr div.tconbx:eq(" + $(this).index() + ")").fadeIn(0);
            } else {
                $(this).attr("class", "");
                $("#tcon_wr div.tconbx:eq(" + $(this).index() + ")").fadeOut(0);
            }
        });


        $('#txtRentStartDay').text(startDay);
        $('#txtRentStartWeekDay').text('(' + cf_DisplayDay(startDay) + ')');
        $('#txtRentStartAmPm').text(startAmPm);
        $('#txtRentStartTime').text(startTime);

        $('#txtRentEndDay').text(endDay);
        $('#txtRentEndWeekDay').text('(' + cf_DisplayDay(endDay) + ')');
        $('#txtRentEndAmPm').text(endAmPm);
        $('#txtRentEndTime').text(endTime);

        $('#addr1').text(addr1);
        $('#addr2').text(addr2);
        $('#addr3').text(addr3);

        var carTypeList = "${preParam.carTypeList}".split(',');

        $('input[name=carType]').each(function () {
            for (var i = 0; i < carTypeList.length; i++) {
                if ($(this).attr('id') == carTypeList[i]) {
                    $(this).prop('checked', true);
                }
            }
        });

        setTimeDiff();
    }


    // 로그인안하고 데이터세팅한 값 저장부
    function reloadParam() {

        var $form = $('<form></form>');

        $form.attr('action', "/user/login.do");
        $form.attr('method', 'post');

        var startDay = $('<input type="hidden" value="' + String($('#txtRentStartDay').text()) + '" name="startDay">');
        var startWeekDay = $('<input type="hidden" value="' + String($('#txtRentStartWeekDay').text()) + '" name="startWeekDay">');
        var startAmPm = $('<input type="hidden" value="' + String($('#txtRentStartAmPm').text()) + '" name="startAmPm">');
        var startTime = $('<input type="hidden" value="' + String($('#txtRentStartTime').text()) + '" name="startTime">');

        var endDay = $('<input type="hidden" value="' + String($('#txtRentEndDay').text()) + '" name="endDay">');
        var endWeekDay = $('<input type="hidden" value="' + String($('#txtRentEndWeekDay').text()) + '" name="endWeekDay">');
        var endAmPm = $('<input type="hidden" value="' + String($('#txtRentEndAmPm').text()) + '" name="endAmPm">');

        var endTime = $('<input type="hidden" value="' + String($('#txtRentEndTime').text()) + '" name="endTime">');
        var tabIdx = $('<input type="hidden" value="' + activeDeliveryTab + '" name="tabIdx">');


        var ad1 = String($('#addr1').text());
        var ad2 = String($('#addr2').text());
        var ad3 = String($('#addr3').text());

        var addr1 = $('<input type="hidden" value="' + encodeURIComponent(ad1) + '" name="addr1">');
        var addr2 = $('<input type="hidden" value="' + encodeURIComponent(ad2) + '" name="addr2">');
        var addr3 = $('<input type="hidden" value="' + encodeURIComponent(ad3) + '" name="addr3">');

        var carTypeList = new Array();

        $('input[name=carType]').each(function () {
            if ($(this).is(":checked")) {
                carTypeList.push($(this).attr('id'));
            }
        });

        var carTypeList = $('<input type="hidden" value="' + carTypeList + '" name="carTypeList">');

        $form.append(startDay);
        $form.append(startWeekDay);
        $form.append(startAmPm);
        $form.append(startTime);
        $form.append(endDay);
        $form.append(endWeekDay);
        $form.append(endAmPm);
        $form.append(endTime);
        $form.append(addr1);
        $form.append(addr2);
        $form.append(addr3);
        $form.append(carTypeList);
        $form.append(tabIdx);

        $form.appendTo('body');
        $form.submit();

    }

    // 시작시간 최신화
    function setServerTime() {

        $.ajax({
            type: "POST",
            url: "/user/getServerTime.json",
            dataType: "json",
            async: false,
            success: function (res) {

            }, error: function () {

            }
        }).done(function (res) {
            //console.log(JSON.stringify(res));
            GLOBAL_SERVER_TIME = res.serverTime;
            GLOBAL_SERVER_TIME_YMD = res.serverTime.split(' ')[0];
            GLOBAL_SERVER_TIME_HM = res.serverTime.split(' ')[1];
        });

    }

    function preSubmit() {

        var rentStartDay = cf_getOnlyNumber($("#txtRentStartDay").text()).replace('.', ''); //대여일시
        var rentEndDay = cf_getOnlyNumber($("#txtRentEndDay").text()).replace('.', '');     //반납일시
        var rentStartTime = $('#txtRentStartAmPm').text() == 'PM' ? cf_getOnlyNumber(convertTimeFormat24MIS($("#txtRentStartTime").text()).replace(':', '')) : cf_getOnlyNumber($('#txtRentStartTime').text()); //대여시간
        var rentEndTime = $('#txtRentEndAmPm').text() == 'PM' ? cf_getOnlyNumber(convertTimeFormat24MIS($("#txtRentEndTime").text()).replace(':', '')) : cf_getOnlyNumber($("#txtRentEndTime").text());     //반납시간

        //장기 단기 TODO
        //한달간을 사용자가 선택한 경우 단기?

        var difDate = rentEndDay - rentStartDay;
        var cDay = 24 * 60 * 60 * 1000;// 시 * 분 * 초 * 밀리세컨
        var cMonth = cDay * 30;// 월 만듬
        var cYear = cMonth * 12; // 년 만듬

        var longTermYn = "";

        //장기 단기 구분
        if (parseInt(difDate / cMonth) == 0 || parseInt(difDate / cMonth) > 1) {
            longTermYn = "N";
        } else {
            longTermYn = "Y";
        }

        var carTypeArr = new Array();

        if ($("input:checkbox[id='cari01']").is(":checked") == true) {//경차
            carTypeArr.push("CP");
        }
        if ($("input:checkbox[id='cari02']").is(":checked") == true) { //준준형
            carTypeArr.push("SMD");
        }
        if ($("input:checkbox[id='cari03']").is(":checked") == true) {//중형
            carTypeArr.push("MD");
        }
        if ($("input:checkbox[id='cari04']").is(":checked") == true) {//대형
            carTypeArr.push("LG");
        }
        if ($("input:checkbox[id='cari05']").is(":checked") == true) {//승합&SUV
            carTypeArr.push("VN");
            carTypeArr.push("SV");
        }
        if ($("input:checkbox[id='cari06']").is(":checked") == true) {
            carTypeArr.push("IP");
        }


        var rentType = '';
        switch (activeDeliveryTab) {
            case 0 :
                rentType = 'OF';
                break;
            case 1 :
                rentType = 'DL';
                break;
            default :
                break;
        }

        var sendData = {
            'rentStartDay': cf_getOnlyNumber($("#txtRentStartDay").text()).replace('.', ''),
            'rentEndDay': cf_getOnlyNumber($("#txtRentEndDay").text()).replace('.', ''),
            'rentStartTime': rentStartTime,
            'rentEndTime': rentEndTime,
            'deliveryAddr': $('.delivary_addr_text').text(),
            'returnAddr': $('.return_addr_text').text(),
            'longTermYn': longTermYn,
            'carTypeCodeList': carTypeArr.toString().replace(/,/g, '|'),
            'deliveryTypeCode': rentType
        }

        var rentReturnTime = "";
        var url = "/user/insertEstimate.do";

        $.ajax({
            type: "POST",
            url: url,
            data: sendData,
            dataType: "json",
            success: function (res) {

            }, error: function () {
                //Ajax 실패시
            }
        }).done(function (res) {

            switch (res.errCd) {
                case 1 :
                    alertify.alert('', res.errMsg + " 마이페이지로 이동합니다.").set('onok', function (closeEvent) {
                        location.href = "/user/estimate.do?tab=0";
                    });
                    break;
                case -1 :
                    alert("만 21세 미만은 차량대여 서비스를 이용하실 수 없습니다.");
                    break;
                default :
                    break;
            }

        });

    }


    // 직접 매칭 서비스 script start
    function locationShowTargetCarList() {


        var rentStartDay = cf_getOnlyNumber($("#txtRentStartDay").text()).replace('.', ''); //대여일시
        var rentEndDay = cf_getOnlyNumber($("#txtRentEndDay").text()).replace('.', '');     //반납일시
        var rentStartTime = $('#txtRentStartAmPm').text() == 'PM' ? cf_getOnlyNumber(convertTimeFormat24MIS($("#txtRentStartTime").text()).replace(':', '')) : cf_getOnlyNumber($('#txtRentStartTime').text()); //대여시간
        var rentEndTime = $('#txtRentEndAmPm').text() == 'PM' ? cf_getOnlyNumber(convertTimeFormat24MIS($("#txtRentEndTime").text()).replace(':', '')) : cf_getOnlyNumber($("#txtRentEndTime").text());     //반납시간

        var carTypeArr = new Array();

        if ($("input:checkbox[id='cari01']").is(":checked") == true) {//경차
            carTypeArr.push("CP");
        }
        if ($("input:checkbox[id='cari02']").is(":checked") == true) { //준준형
            carTypeArr.push("SMD");
        }
        if ($("input:checkbox[id='cari03']").is(":checked") == true) {//중형
            carTypeArr.push("MD");
        }
        if ($("input:checkbox[id='cari04']").is(":checked") == true) {//대형
            carTypeArr.push("LG");
        }
        if ($("input:checkbox[id='cari05']").is(":checked") == true) {//승합&SUV
            carTypeArr.push("VN");
            carTypeArr.push("SV");
        }
        if ($("input:checkbox[id='cari06']").is(":checked") == true) {
            carTypeArr.push("IP");
        }

        var rentType = '';
        switch (activeDeliveryTab) {
            case 0 :
                rentType = 'OF';
                break;
            case 1 :
                rentType = 'DL';
                break;
            default :
                break;
        }


        var $form = $('<form method="post"></form>');

        $form.attr('action', "/user/carSearch/carList.do");
        $form.attr('method', 'post');

        var rentStartDay = $('<input type="hidden" value="' + rentStartDay + '" name="rentStartDay">');
        var rentStartTime = $('<input type="hidden" value="' + rentStartTime + '" name="rentStartTime">');
        var rentEndDay = $('<input type="hidden" value="' + rentEndDay + '" name="rentEndDay">');
        var rentEndTime = $('<input type="hidden" value="' + rentEndTime + '" name="rentEndTime">');

        var deliveryAddr = $('<input type="hidden" value="' + $('.delivary_addr_text').text() + '" name="deliveryAddr">');
        var return_addr_text = $('<input type="hidden" value="' + $('.return_addr_text').text() + '" name="returnAddr">');

        var carTypeCodeList = $('<input type="hidden" value="' + carTypeArr + '" name="carTypeCodeList">');
        var deliveryTypeCode = $('<input type="hidden" value="' + rentType + '" name="deliveryTypeCode">');

        var carTypeList = $('<input type="hidden" value="' + carTypeList + '" name="carTypeList">');

        $form.append(rentStartDay);
        $form.append(rentStartTime);
        $form.append(rentEndDay);
        $form.append(rentEndTime);
        $form.append(deliveryAddr);
        $form.append(return_addr_text);
        $form.append(carTypeCodeList);
        $form.append(deliveryTypeCode);

        $form.appendTo('body');
        $form.submit();

    }

    function mainValidation() {

        var validFlag = true;
        setServerTime();

        // 시간차이 및 서버와의 시간차이 validation
        // if (!dateTimeValidation()) {
        //     submitBtnActive();
        //     return false;
        // }

        var rentType = "";
        var rentStartDay = cf_getOnlyNumber($("#txtRentStartDay").text()).replace('.', ''); //대여일시
        var rentEndDay = cf_getOnlyNumber($("#txtRentEndDay").text()).replace('.', '');     //반납일시
        var rentStartTime = $('#txtRentStartAmPm').text() == 'PM' ? cf_getOnlyNumber(convertTimeFormat24MIS($("#txtRentStartTime").text()).replace(':', '')) : cf_getOnlyNumber($('#txtRentStartTime').text()); //대여시간
        var rentEndTime = $('#txtRentEndAmPm').text() == 'PM' ? cf_getOnlyNumber(convertTimeFormat24MIS($("#txtRentEndTime").text()).replace(':', '')) : cf_getOnlyNumber($("#txtRentEndTime").text());     //반납시간

        if (isEmpty(rentStartDay)) {
            alert("대여일시를 선택하세요");
            return false;
        }

        if (isEmpty(rentStartTime)) {
            alert("대여시간를 선택하세요");
            return false;
        }

        //반납일시, 반납시간
        if (isEmpty(rentEndDay)) {
            alert("반납일시 선택하세요");
            return false;
        }

        if (isEmpty(rentEndTime)) {
            alert("반납시간 선택하세요");
            return false;
        }

        var deliveryAddr = '';
        var returnAddr = '';

        //OF	지점방문
        // if (activeDeliveryTab == 0) {
        //     deliveryAddr = $('.delivary_addr_text').text();
        //
        //     rentType = "OF";
        //     if (isEmpty(deliveryAddr)) {
        //         alert("대여위치를 입력해주세요.");
        //         return false;
        //     }
        // }
        // if (activeDeliveryTab == 1) { //DL	배달대여
        //     deliveryAddr = $('.delivary_addr_text').text();
        //     returnAddr = $('.return_addr_text').text();
        //     rentType = "DL";
        //     if (isEmpty(deliveryAddr)) {
        //         alert("대여위치를 입력해주세요.");
        //         return false;
        //     }
        //     if (isEmpty(returnAddr)) {
        //         alert("반납위치를 입력해주세요.");
        //         return false;
        //     }
        // }

        var carTypeArr = new Array();

        if ($("input:checkbox[id='cari01']").is(":checked") == true) {//경차
            carTypeArr.push("CP");
        }
        if ($("input:checkbox[id='cari02']").is(":checked") == true) { //준준형
            carTypeArr.push("SMD");
        }
        if ($("input:checkbox[id='cari03']").is(":checked") == true) {//중형
            carTypeArr.push("MD");
        }
        if ($("input:checkbox[id='cari04']").is(":checked") == true) {//대형
            carTypeArr.push("LG");
        }
        if ($("input:checkbox[id='cari05']").is(":checked") == true) {//승합&SUV
            carTypeArr.push("VN");
            carTypeArr.push("SV");
        }
        if ($("input:checkbox[id='cari06']").is(":checked") == true) {
            carTypeArr.push("IP");
        }

        // if (Object.keys(carTypeArr).length == 0) {
        //     alert("차종은 필수선택입니다.");
        //     return false;
        // }

        return validFlag;

    }


</script>

</body>
</html>